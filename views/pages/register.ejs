<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AlbsigBay - Registrierung</title>
    <link rel="icon" type="image/png" href="/public/favicon.png"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/public/style.css"/>
</head>
<body>
<%- include('../components/nav', {page: 'login'}) %>
<main class="container">
    <div class="mt-3">
        <h1 class="display-1">Registrierung</h1>
        <hr>
        <form action="/register" id="registerForm" method="post" class="row g-3 form-validation" novalidate>
            <div class="col-md-4">
                <label for="firstname" class="form-label">Vorname</label>
                <input type="text" class="form-control" name="firstname" id="firstname" required>
                <div class="invalid-feedback">
                    Bitte Vorname eingeben.
                </div>
            </div>
            <div class="col-md-4">
                <label for="name" class="form-label">Nachname</label>
                <input type="text" class="form-control" name="name" id="name" required>
                <div class="invalid-feedback">
                    Bitte Nachname eingeben.
                </div>
            </div>
            <div class="col-md-4">
                <label for="username" class="form-label">Username (optional)</label>
                <div class="input-group has-validation">
                    <span class="input-group-text">@</span>
                    <input type="text" class="form-control" name="username" id="username">
                </div>
            </div>
            <div class="col-md-4">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" name="email" id="email"
                       pattern="^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$"
                       required>
                <div class="invalid-feedback">
                    Bitte Email eingeben.
                </div>
            </div>
            <div class="col-md-4">
                <label for="password" class="form-label">Passwort</label>
                <input type="password" class="form-control" name="password" id="password" required>
                <div class="invalid-feedback">
                    Bitte Passwort eingeben.
                </div>
            </div>
            <div class="col-md-4" id="rePasswordValidate">
                <label for="rePassword" class="form-label">Passwort bestätigen</label>
                <input type="password" class="form-control" name="rePassword" id="rePassword" required>
                <div class="invalid-feedback">
                    Bitte Passwort bestätigen.
                </div>
            </div>
            <div class="col-md-5">
                <label for="city" class="form-label">Stadt</label>
                <input type="text" class="form-control" name="city" id="city" required>
                <div class="invalid-feedback">
                    Bitte Stadt eingeben.
                </div>
            </div>
            <div class="col-md-4">
                <label for="state" class="form-label">State</label>
                <select class="form-select" name="state" id="state" required>
                    <option selected disabled value="">Wählen...</option>
                    <option value="Baden-Wuerttemberg">Baden-Württemberg</option>
                    <option value="Bayern">Bayern</option>
                    <option value="Berlin">Berlin</option>
                    <option value="Brandenburg">Brandenburg</option>
                    <option value="Bremen">Bremen</option>
                    <option value="Hamburg">Hamburg</option>
                    <option value="Hessen">Hessen</option>
                    <option value="Mecklenburg-Vorpommern">Mecklenburg-Vorpommern</option>
                    <option value="Niedersachsen">Niedersachsen</option>
                    <option value="Nordrhein-Westfalen">Nordrhein-Westfalen</option>
                    <option value="Rheinland-Pfalz">Rheinland-Pfalz</option>
                    <option value="Saarland">Saarland</option>
                    <option value="Sachsen">Sachsen</option>
                    <option value="Sachsen-Anhalt">Sachsen-Anhalt</option>
                    <option value="Schleswig-Holstein">Schleswig-Holstein</option>
                    <option value="Thüringen">Thüringen</option>
                </select>
                <div class="invalid-feedback">
                    Bitte Bundesland wählen.
                </div>
            </div>
            <div class="col-md-3">
                <label for="zip" class="form-label">Postleitzahl</label>
                <input type="text" class="form-control" name="zip" id="zip"
                       pattern="^(?!01000|99999)(0[1-9]\d{3}|[1-9]\d{4})$" required>
                <div class="invalid-feedback">
                    Bitte Postleitzahl (PLZ) eingeben.
                </div>
            </div>
            <div class="col-md-5">
                <label for="street" class="form-label">Straße</label>
                <input type="text" class="form-control" name="street" id="street" required>
                <div class="invalid-feedback">
                    Bitte Stadt eingeben.
                </div>
            </div>
            <div class="col-md-3">
                <label for="streetNumber" class="form-label">Hausnummer</label>
                <input type="text" class="form-control" name="streetNumber" id="streetNumber"
                       pattern="\d+" required>
                <div class="invalid-feedback">
                    Bitte Hausnummer eingeben.
                </div>
            </div>
            <div class="col-12">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" name="gdpr" id="invalidCheck" required>
                    <label class="form-check-label" for="invalidCheck">
                        <a href="" data-bs-toggle="modal" data-bs-target="#gdprModal">
                            Datenschutzerklärung
                        </a>
                    </label>
                    Akzeptieren
                    <div class="invalid-feedback">
                        Bitte Datenschutzerklärung akzeptieren.
                    </div>
                </div>
            </div>
            <div class="col-12">
                <button class="btn btn-primary" type="submit">Abschicken</button>
            </div>
        </form>
    </div>
</main>
<div class="modal fade" id="gdprModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
     aria-labelledby="gdprLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="gdprLabel">Datenschutzerklärung</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h2>Impressum</h2>
                <p>Test GmbH & Co. KG<br/>
                    Teststraße 8<br/>
                    12345 Teststadt
                </p>
                <p>
                    Telefon: +49 (0) 1212-34-34-553<br/>
                    E-Mail: <a href="mailto:support@albsigbay.de">support@albsigbay.de</a><br/>
                </p>
                <p>
                    <strong>Vertreten durch:</strong><br/>
                    HalloWelt GmbH<br/>
                    Geschäftsführer: Max Mustermann<br/>
                    Registergericht: Amtsgericht Albstadt Ebingen<br/>
                    Registernummer: 2345
                </p>
                <p>
                    <strong>Registereintrag:</strong><br/>
                    Eingetragen im Handelsregister.<br/>
                    Registergericht: Albstadt Ebingen<br/>
                    Registernummer: 12243
                </p>
                <p>
                    <strong>Umsatzsteuer-ID: </strong><br/>
                    Umsatzsteuer-Identifikationsnummer nach §27a<br>
                    Umsatzsteuergesetz: DE123456789
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Schließen</button>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    window.onload = () => {
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        let forms = document.querySelectorAll('.form-validation');

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }

                    form.classList.add('was-validated')
                }, false)
            })
    }
</script>
</body>
</html>
